{% extends "base.html" %} 
{% block content %}
<h4>Agregar producto</h4>
<form method="post" enctype="multipart/form-data">
  <div class="row">
    <div class="col-md-6">

      <div class="mb-3">
        <label for="nombre" class="form-label">Nombre</label>
        <input id="nombre" class="form-control" name="nombre" required>
      </div>

      <div class="mb-3">
        <label for="cantidad" class="form-label">Cantidad</label>
        <input id="cantidad" class="form-control" type="number" name="cantidad" value="1" min="1" required>
      </div>

      <div class="mb-3">
        <label for="precio_compra" class="form-label">Precio compra</label>
        <input id="precio_compra" class="form-control" type="number" step="0.01" name="precio_compra" min="0" required>
      </div>

      <!-- ✅ Checkboxes de categorías -->
      <div class="mb-3">
        <label class="form-label">Categorías</label>
        <div class="form-check">
          {% for cat in categorias %}
            <div class="form-check mb-1">
              <input class="form-check-input" type="checkbox" 
                     name="categorias" value="{{ cat.id }}" id="cat-{{ cat.id }}">
              <label class="form-check-label" for="cat-{{ cat.id }}">
                {{ cat.nombre }}
              </label>
            </div>
          {% endfor %}
        </div>
      </div>

      <div class="mb-3">
        <label for="lote_id" class="form-label">Lote (opcional)</label>
        <select id="lote_id" class="form-select" name="lote_id">
          <option value="">-- Ninguno --</option>
          {% for lote in lotes %}
            <option value="{{ lote.id }}">Lote #{{ lote.id }} (envío ${{ lote.costo_envio }})</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <div class="col-md-6">
      <div class="mb-3">
        <label for="costo_envio_unitario" class="form-label">Costo envío unitario</label>
        <input id="costo_envio_unitario" class="form-control" type="number" step="0.01" name="costo_envio_unitario" min="0">
      </div>

      <div class="mb-3">
        <label for="costo_extra" class="form-label">Costo extra</label>
        <input id="costo_extra" class="form-control" type="number" step="0.01" name="costo_extra" min="0">
      </div>

      <div class="mb-3">
        <label for="margen" class="form-label">Margen (0.5 = 50%)</label>
        <input id="margen" class="form-control" type="number" step="0.01" name="margen" value="0.5" min="0">
      </div>

      <div class="mb-3">
        <label for="fotos" class="form-label">Fotos (máx 4)</label>
        <input id="fotos" class="form-control" type="file" name="fotos" multiple accept="image/*">
      </div>

      <div class="mt-3">
        <button class="btn btn-primary w-100">Agregar producto</button>
      </div>
    </div>
  </div>
</form>
{% endblock %}