{% extends "base.html" %}
{% block content %}
<div class="row">
  <div class="col-md-6">
    <div id="carouselExample" class="carousel slide">
      <div class="carousel-inner">
        {% for f in producto.fotos %}
          <div class="carousel-item {% if loop.first %}active{% endif %}">
            <img src="{{ url_for('uploaded_file', filename=f.ruta) }}" class="d-block w-100" style="height:400px; object-fit:cover;">
          </div>
        {% endfor %}
      </div>
      {% if producto.fotos|length > 1 %}
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
        </button>
      {% endif %}
    </div>
  </div>
  <div class="col-md-6">
    <h3>{{ producto.nombre }}</h3>
    <p>Stock: <strong>{{ producto.cantidad }}</strong></p>
    <p>Precio compra: ${{ producto.precio_compra }}</p>
    <p>Precio sugerido: <strong>${{ producto.precio_sugerido }}</strong></p>
    <p>Lote: {% if producto.lote %} #{{ producto.lote.id }} {% else %} <em>Unitario</em> {% endif %}</p>
    <div class="mt-3">
      <a class="btn btn-primary" href="{{ url_for('editar_producto', producto_id=producto.id) }}">Editar</a>
      <form method="post" action="{{ url_for('eliminar_producto', producto_id=producto.id) }}" class="d-inline" onsubmit="return confirm('Eliminar producto?')">
        <button class="btn btn-danger">Eliminar</button>
      </form>
    </div>
  </div>
</div>
{% endblock %}